

[[sec_8]]
== メタデータ

データ製品に関するメタデータとして、JMP2.0に基づくメタデータと、3D都市モデルの作成に使用した原典資料のリストを作成する。JMP2.0に基づくメタデータの仕様を、<<sec_8.1>>から<<sec_8.4>>に示す。原典資料リストの仕様は、<<sec_8.5>>に示す。

[[sec_8.1]]
=== メタデータの形式

メタデータの形式は、JMP2.0とする。

[[sec_8.2]]
=== メタデータの記載項目

メタデータの記載項目を<<table_8-1>>に示す。

[[table_8-1]]
.メタデータに含めるべき項目
[cols="3",options="noheader"]
|===
h| メタデータ項目 h| 記述する内容 h| 記述例

| メタデータ>ファイル識別子 | udx_[都市コード]_[整備年度]_[地物型]_[オプション]とする。 [都市コード]は、3D都市モデルを作成する範囲が市区町村の場合は、都道府県コード（2桁）と市区町村コード（3桁）の組み合わせからなる5桁の数字とする。都道府県の場合は、都道府県コード（2桁）とする。 [整備年度]は作成した西暦年度（4桁）を記述する。 [都市コード]及び[整備年度]は、いずれも半角数字とする。 [地物型]は、地物型又はモジュールを示す接頭辞（3文字又は4文字のアルファベット）とする。 なお、_[地物型]は、メタデータを地物型又はモジュールごとに作成せず、まとめて作成した場合は省略する。 [オプション]は、成果品が複数種類作成される場合に、これらを識別するために使用する任意の文字列とする。半角英数字のみを使用可とする。成果品を格納するルートフォルダに使用する[オプション]の文字列に一致させること。成果品が1種類の場合は省略する。 | udx_27100_2020_fld
| メタデータ>言語 | メタデータの記述に使用する言語。日本語とする。 | jpn（固定値）
| メタデータ>文字集合 | メタデータに使用する文字コード。UTF-8とする。 | 004（固定値）
| メタデータ>階層レベル | メタデータの作成対象。データ集合とする。 | 005（固定値）
| メタデータ>問い合わせ先 | 発注者の問合せ先を記述する。組織名、電話番号、オンライン情報源（ProjectPLATEAUのURL）等を記述する。 役割は「010（刊行者）」とする。 | 国土交通省都市局 03-5253-8397 www.mlit.go.jp/plateau/
| メタデータ>日付 | メタデータの作成日付をYYYY-MM-DDにより記述する。 | 2021-02-25
| メタデータ>規格の名称 | メタデータの仕様。 | JMP（固定値）
| メタデータ>規格の版 | メタデータの版。 | 2.0（固定値）
| 参照系情報 | データ集合に適用される空間参照系の識別子。製品仕様書で指定された空間参照系の識別子を記述する。識別子は、JMP2.0を参照する。 「日本測地系2011 における経緯度座標系と東京湾平均海面を基準とする標高の複合座標参照系」の場合は、JGD2011, TP / (B, L), Hとなる。 「日本測地系2011 における平面直角座標系と東京湾平均海面を基準とする標高の複合座標参照系」の場合は、JGD2011, TP / n (X, Y), Hとなる。 ここでnは、平面直角座標系の系番号であり、拡張製品仕様書に使用する系番号を明記する。 | JGD2011, TP / (B, L), H
| 識別情報>題名 | 3D都市モデル_[都市コード]_[提供者区分]_[整備年度] [都市コード]及び[整備年度]は、ファイル識別子の[都市コード]及び[整備年度]に一致する。 [提供者区分]は、成果品フォルダの名称に適用する[提供者区分]に一致する。 | 3D都市モデル_27100_city_2020
| 識別情報>日付及び日付型 | データの作成日付をYYYY-MM-DDにより記述する。 日付型は以下より選択する。 001：作成日、002：刊行日、003：改訂日 | 2021-02-25, 003
| 識別情報>要約 | 3D都市モデルの概要を記載する。 データ集合に含まれる地物やそのLOD、作成に使用した原典資料、作成手法を示す。また、以下に示すデータの利用上の注意事項を入れること。 「ただし、原典資料の位置の正しさの違いや、作成された時期の違いにより、現状を正確に反映していない場合があることにご注意ください。」 | 
| 識別情報>目的 | 各都市において想定される3D都市モデルのユースケースを記述する。 | 災害リスクの三次元可視化
| 識別情報>状態 | 「完成」を示す固定値とする。 | 001（固定値）
.2+| 識別情報>問い合わせ先 | 発注者の問合せ先を記述する。組織名、電話番号、オンライン情報源（ProjectPLATEAUのURL）等を記述する。 役割は「010（刊行者）」とする。 | 国土交通省都市局 03-5253-8397 www.mlit.go.jp/plateau/
| 作成者の問合せ情報を記述する。 役割名は「060（創作者）」とする。 | 
| 識別情報>記述的キーワード a| キーワードを、複数グループ化して記述する。

* 「type=002」として、データ製品に含まれる都市の名称を入れる。
* 「type=005」として、データ製品に含まれる地物型の名称を入れる。
* 「type=005」として、データ製品に含まれるLODのレベルを入れる。
* 「type=005」として、データ製品に想定されるユースケースを入れる。
* 「type=005」として、データ製品の作成に使用した原典資料の名称を入れる。
* 「type=005」として、データ製品に含まれる都市の名称を入れる。 | 

| 識別情報>利用制限 | 固定値とし、Licensed under CC BY 4.0を記述する。 | Licensed under CC BY 4.0
| 識別情報>空間表現型 | ベクトルを意味する「001」を入力する。 | 001（固定値）
| 識別情報>空間解像度 | 等価縮尺の分母にデータ集合に適用する地図情報レベルを入力する。 複数のレベルが混在する場合は、それぞれ記述する。 | 2500
| 識別情報>言語 | メタデータの記述に使用する言語。日本語とする。 | jpn（固定値）
| 識別情報>文字集合 | メタデータに使用する文字コード。UTF-8とする。 | 004（固定値）
| 識別情報>主題分類 | 構造物を意味する「017」を入力する。 | 017（固定値）
| 識別情報>範囲 a|

* 作成範囲を包含する最小の矩形を、東西の経度、南北の緯度により記述する。
* 地物やLODにより整備範囲が異なる場合は、作成範囲の違いを自由記述により明記する。
* 地理記述には、都道府県及び市区町村名を記述する。 | LOD1の作成範囲は●●市全域、LOD2の作成範囲は、△△駅を中心とする半径約300m内。

| 配布情報>配布書式 | CityGML2.0、i-UR3.0をそれぞれ書式情報として入れる。 | 
| 配布情報>オンライン | G空間情報センターのURLを記述する。 | 
| データ品質情報>データ品質 | 製品仕様書に示す品質要求の各項目について品質評価結果を記述する。 また、系譜には、主題属性の作成方法や図形と属性のアンマッチへの対処方法等、データ品質に記載できないが、データ製品の利用にあたり注意すべきデータの品質に係るデータの作成方法を記述する。 | 

|===

[[sec_8.3]]
=== メタデータの作成単位

メタデータは、3D都市モデル全体について、一つのメタデータを作成することを原則とする。

以下の場合には、3D都市モデル全体のメタデータとは別に、対象を限定したメタデータを作成する。

* 原典資料の管理者が3D都市モデルの整備主体とは異なる場合（ただし、原典資料がオープンデータである場合は除く。）

** 洪水浸水想定区域、津波浸水想定、高潮浸水想定区域、内水浸水想定区域及び土砂災害警戒区域にかかる原典資料として、国土数値情報（オープンデータ）ではなく、河川管理者等から貸与されたデータを使用した場合は、それぞれメタデータを作成する。

** 建築物モデル（LOD4）の原典資料として、整備主体以外の施設管理者から貸与されたBIMモデル等を使用した場合は、建築物モデル（LOD4）に対するメタデータを作成する。

* 3D都市モデルの整備事業者が対象地物や対象エリア等によって異なる場合

** 整備事業者毎に作成する。

* 空間参照系が日本測地系2011 における経緯度座標系と東京湾平均海面を基準とする標高の複合座標参照系以外の場合

** 地下埋設物モデルは空間参照系が日本測地系2011における平面直角座標系と東京湾平均海面を基本とする標高の複合座標参照系であるため、地下埋設物モデルに対するメタデータを作成する。

[[sec_8.4]]
=== メタデータのファイル名称

メタデータのファイル名称は、メタデータの記載項目である「ファイル識別子」に一致させる。

メタデータの拡張子は、.xmlとする。

[[sec_8.5]]
=== 原典資料リストの仕様

JMP2.0では、データ製品を作成する際に使用した原典資料の諸元を詳細に記述できないことから、標準製品仕様書では、原典資料リストのための仕様を定める。3D都市モデルを作成する際には、必ずこの原典資料リストを作成しなければならない。

==== 原典資料リストの記載項目

[cols="3",options="noheader,unnumbered"]
|===
h| 原典資料リスト項目 h| 記述する内容 h| 記述例

| meshcode | 標準地域メッシュのコードを記述する。地物のファイル単位として指定されている、3次メッシュ又は2次メッシュのメッシュコードとする。地下埋設物モデルの場合は、国土基本図の図郭コード（図郭の区画名）とする。 メッシュ毎又は図郭ごとに記述することを基本とする。 同一の地物・属性について、都市域全体で同一の原典資料が使用されている場合、メッシュコード又は図郭コードを省略する。 例えば、1つの洪水浸水想定区域図を都市域全体で使用している場合は、メッシュコードを省略する。 一方、LOD0の建築物の外形について、都市計画基本図を使用して作成しつつ、一部のメッシュは航空写真から図化した場合は、同一地物・属性について複数の原典資料が使用されているため、メッシュ毎に記述する。 また、都市計画基礎調査を複数年に分けて実施しており、場所によって作成時点の異なる都市計画基礎調査の成果が使用されている場合には、同一地物・属性について複数の原典資料が使用されているため、メッシュ毎に記述する。 | 50305455
| feature | 地物名を記述する。各モジュールに複数の地物が定義されている場合は、集成する地物（例：Building）を記述することを基本とする。集成する地物に束ねられ、部品として使われる地物（例：WallSurface, Door）は記述しなくてもよいが、特に明記したい場合は、記述してもよい。 なお、Appearance（地物に貼るテクスチャ）は、貼り付ける対象となる地物（例：Building）のプロパティとして本リストでは記述する。 地物名には接頭辞（例：Buildingの場合は、bldg）を付す。 | bldg:Building
| featureName | "feature"で、"GenericCityObject"を記述した場合は、どのGenericCityObjectを使用したかを識別するため、name属性の値を記述する。GenericCityObject以外をfeatureに記述した場合は、空とする。 | 小学校区
| property | 地物の主題属性（データ型を含む）及び空間属性（幾何オブジェクトへの参照）を記述する。空間属性はLOD別とする。 地物の主題属性がデータ型として定義されている場合は、関連役割名とする。ただし、データ型に定義された各属性に異なる原典資料が使用されている場合は、"関連役割名.主題属性名"とする。 地物のテクスチャは、"property"を"app:appearance"とする。 属性名には、接頭辞を付す。 接頭辞は、応用スキーマ文書に示す地物の主題属性又は空間属性に付す接頭辞に一致させる。 例：bldg:function, bldg:lod1Solid, bldg:lod2Solid, bldg:buildingDetailAttribute, uro:buildingDetailAttribute.uro:vacancy, app:appearance | bldg:lod0RoofEdge
| propertyName | "property"で、"gen:stringAttribute"などの任意に追加した属性を記述した場合は、属性を識別するため、name属性（又はkey属性）の値を記述する。任意に追加した属性以外をpropertyに記述した場合は、空とする。 | 名称
| sourceName | 原典として使用した資料の名称を記述する。 | 航空写真
| authority | 原典資料の作成機関の名称を記述する。 | ●●県〇〇市
| date | 原典資料が作成、公表又は改訂された日付。 | 2021-01-01
| dateType | "date"で記述した日付の意味。作成日の場合は001、公表日の場合は002、改訂日の場合は003、不明な場合は004とする。 | 001
| srs | 原典資料がGISデータ又は図面の場合に、適用されている座標参照系の識別子を、JIS X7115メタデータ附属書2に従い記述する。GISデータではない場合は空とする。 | JGD2011 / 2(X, Y)
| mapLevel | 原典資料がGISデータの場合又は図面の場合に、地図情報レベルを記述する。数値のみの記載とする。例：地図情報レベル2500の場合は"2500"とする。 | 2500
| URL | 原典資料又はその詳細な情報が入手可能なウェブサイトがある場合にはURLを記述する。 a| https://nlftp.mlit.go.jp/ksj/%3Cbr%3Egml/datalist/KsjTmplt-A27-v3_0.html[https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-A27-v3_0.html]

|===

==== 原典資料リストの作成単位

データ製品に対して1つの原典資料リストを作成する。

==== 原典資料リストのファイル仕様

出力データ構造には、CSVを使用する。拡張子は、「.csv」とする。

(1)に示す記載項目の組を1レコードとし、以下に示す規則に従い出力する。

[cols="2",options="noheader,unnumbered"]
|===
h| 文字コード | UTF-8 （BOM付）

h| 改行コード | CRLF
h| 区切り文字 | カンマ（,）
h| ヘッダ行の有無 | あり
h| ヘッダ行の行数 | 1
h| ヘッダ行の内容 | 原典資料リスト項目を使用する。
h| 文字列でのダブルクォートの有無 | あり
h| null値の指定方法 | ,, （区切り文字の連続）
h| 1項目内で、複数の値を列挙する場合に使用する区切り文字 | ;（セミコロン）
h| 禁則文字 | 指定しない

|===

==== 原典資料リストのファイル名称

udx_[都市コード]_[整備年度]_resource
