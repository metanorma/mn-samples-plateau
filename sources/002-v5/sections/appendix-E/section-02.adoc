[[tocE_02]]
=== 鉄道の記述とLOD


==== 交通（鉄道）モデル

鉄道とは、人と物を迅速かつ大量に輸送するため、レールを敷いた専用の通路を用い、その上を車両が円滑に行き来できるように整備された一切の設備とシステムの集合体である。[一般社団法人日本民営鉄道協会] +
標準製品仕様書では、鉄道事業法及び軌道法に基づいて敷設された線路を指し、以下を含む。

* 普通鉄道：鉄道事業法又は軌道法に基づいて運行されている鉄道で、特殊軌道及び索道を除いたもの「<<gsi_ops,付録７ 公共測量標準図式>>」
* 地下鉄：地方公共団体及び東京地下鉄（株）等が管理する地下高速鉄道「<<gsi_ops,付録７ 公共測量標準図式>>」
* 路面電車：道路上に線路を敷設した鉄道で、主として路面上から直接乗り降りできる車両が運行される鉄道「<<gsi_ops,付録７ 公共測量標準図式>>」
* モノレール：車両が一本の軌道桁に跨座し、又は懸垂して走行するもの
* 特殊鉄道：鋼索鉄道、普通鉄道と接続しない工場等特定の地区内の軌道及び採鉱（石）地と工場等を結ぶ専用軌道「<<gsi_ops,付録７ 公共測量標準図式>>」
* 索道：空中ケーブル、スキーリフト、ベルトコンベヤー及びこれらに類するもの「<<gsi_ops,付録７ 公共測量標準図式>>」

なお、線路とは、列車又は車両を走らせるための通路であって，軌道及びこれを支持するために必要な路盤、構造物を包含する地帯をいう。[<<jis_e_1001>>] +
鉄道の記述には、CityGMLに定義されたTransportationモジュールのtran:Railwayを使用する。 +
標準製品仕様書では、鉄道の表現に必要な地物型等をCityGML及びi-URから抽出し、LODごとに、含むべき地物型、各地物型の空間属性の型、取得基準、取得方法及び補足を定めた「交通（鉄道）モデル」を定義する。 +
交通（鉄道）モデルのLODは、LOD0からLOD3までを対象とする。

[[tab-E-1]]
.交通（鉄道）モデルのLODの考え方
image::images/230.webp.png[]

交通（鉄道）モデル（LOD0）は鉄道を線として表現するが、このときの線は、ネットワーク（軌道中心線）又はレールのいずれかを選択できる。3D都市モデルでは、ネットワーク（軌道中心線）を採用することを原則とする。ネットワークデータとして記述することでマクロな人や物の流れを表現・分析可能となり、公共交通網の見直しや公共施設の再配置等に利用することを想定している。レールを採用する場合、「<<gsi_ops,付録７ 公共測量標準図式>>」（以下、「公共測量標準図式」という）に従う。これにより、従来の都市計画基本図の地図表現が可能となる。 +
交通（道路）モデルと同様、LOD1以降では、鉄道の形状を面により表現できる。ただし、鉄道は車両の通行が軌道に限定されており、その中心である軌道中心線がユースケースでも多く利用されていることから、面に加えて軌道中心線を表現する。LOD1及びLOD2では交通（鉄道）オブジェクトは高さをもたないため、立体交差等の高低差を表現できない。これらが必要な場合には、高さをもつLOD3が必要となる。


==== 使用可能な地物型とLOD

交通（鉄道）モデルは、LODごとに、使用すべき地物型やその空間属性が異なる。


[requirement]
.鉄道記述のLOD対応条件
====
[%metadata]
identifier:: /req/rwy/1
subject:: 妥当な交通（鉄道）データセットの要件
description:: 鉄道の記述には、指定されたLODに対応する地物型及び空間属性を使用する。
====

tran:Railwayは、列車又は車両を走らせるための通路となる範囲を示し、tran:TrafficAreaとtran:AuxiliaryTrafficAreaの集まりとして構成される。tran:TrafficAreaは、レールのような通行の用に供される地物を記述するための地物型である。一方、tran:AuxiliaryTrafficAreaは、軌道の構造を支える補助的な役割を果たす地物を記述するための地物型である。 +
tran:Railwayの空間属性は、LOD0では線とし、LOD1以降では面とする。また、tran:TrafficAreaは、面（軌道の範囲）及び線（軌道中心線）となる。ただし、この地物型はLOD2以降でのみ使用可能となる。また、tran:AuxiliaryTrafficAreaは面となり、LOD3で使用可能とする。 +
交通（鉄道）モデルの各LODにおいて使用可能な地物型と空間属性を、<<tab-E-2>>に示す。

[[tab-E-2]]
[cols="3a,3a,^a,^a,^a,^a,6a"]
.交通（鉄道）モデルに使用する地物型と空間属性
|===
^| 地物型 ^| 空間属性 ^| LOD0 ^| LOD1 ^| LOD2 ^| LOD3 ^| 適用

.6+| tran:Railway | |  ● |  ● |  ● |  ● |
| tran:lod0Network ^|  ■ |  |  |  <| LOD0はネットワークを原則とするが、数値地形図との互換性を保つために、レールの中心線を選択できる。
| uro:lod0Geometry ^|  ■ |  |  |  |
| tran:lod1MultiSurface |  |  ● |  |  |
| tran:lod2MultiSurface |  |  |  ● |  |
| tran:lod3MultiSurface |  |  |  |  ● |
.5+| tran:TrafficArea　 | |  |  |  ● |  ● |
| tran:lod2MultiSurface |  |  |  ● |  |
| uro:lod2Network |  |  |  ● |  <| CompositeCurveとする。
| tran:lod3MultiSurface |  |  |  |  ● |
| uro:lod3Network |  |  |  |  ● <| CompositeCurveとする。
.3+| tran:AuxiliaryTrafficArea　 | |  |  |  |  ● |
| tran:lod2MultiSurface |  |  |  |  <| 対象外。
| tran:lod3MultiSurface |  |  |  |  ● |

|===

[%key]
●:: 必須
■:: 条件付必須
〇:: 任意（ユースケースに応じて要否を決定してよい）


==== 鉄道の空間属性

交通（鉄道）モデルにおいて、LOD0では鉄道の形状を線により表現し、LOD1以降は面として表現する。また、LOD2以降では、面に加えて線により表現する。LOD1では鉄道内の区分はできず、LOD2以降で鉄道内を区分可能となる。その座標はLOD0からLOD2までは高さをもたず、LOD3では高さをもつ。LOD0からLOD2では、交通（鉄道）オブジェクトを3次元の地形データに貼り付けることで3次元的に表示して利用することを想定している。 +
LOD0からLOD2までは、軌道中心線は都市計画基本図からの加工又は航空写真からの図化、鉄道用地は航空写真からの図化を前提とした区分である。LOD3は、鉄道事業者の保有資料（鉄道事業法施行規則第12条に定める、線路実測図である「平面図」及び「縦断面図」、又はこのデータ）からの取得を前提とした区分である。 +
鉄道は路線単位で作成し、鉄道の延長方向は以下の場所で区切る。


[requirement]
.鉄道オブジェクトの区切り位置
====
[%metadata]
identifier:: /req/rwy/2
subject:: 妥当な交通（鉄道）データセットの要件
description:: 交通（鉄道）オブジェクトは、以下に示す場所で区切る。
part:: 軌道が分岐又は合流する地点
part:: 鉄道構造の変化点（トンネル、橋梁）
part:: 市区町村界
part:: 位置正確度や取得方法が変わる場所
====


===== LOD0

交通（鉄道）モデル（LOD0）では、鉄道の形状を線により表現する。このとき、交通（鉄道）オブジェクトは、交通（鉄道）モデル（LOD0）の定義に従ったものでなければならない。


[requirement]
.鉄道のLOD0形状定義
====
[%metadata]
identifier:: /req/rwy/3
subject:: 妥当な交通（鉄道）データセットの要件
description:: 鉄道のLOD0の形状は、交通（鉄道）モデル（LOD0）の定義に従う。
====

LOD0は鉄道を線として表現するが、このときの線は、ネットワーク（軌道中心線）又はレールの中心線のいずれかを選択できる。3D都市モデルでは、ネットワークを採用することを原則とする。レールを採用する場合、「<<gsi_ops,付録７ 公共測量標準図式>>」（以下、「公共測量標準図式」という）に従う。 +
ネットワークを採用する場合は、tran:lod0Networkを使用し、レールを採用する場合は、uro:lod0Geometryを使用する。

===== LOD1

交通（鉄道）モデル（LOD1）では、鉄道の形状を面として表現する。このとき、交通（鉄道）オブジェクトは、交通（鉄道）モデル（LOD1）の定義に従ったものでなければならない。


[requirement]
.鉄道のLOD1形状定義
====
[%metadata]
identifier:: /req/rwy/4
subject:: 妥当な交通（鉄道）データセットの要件
description:: 鉄道のLOD1の形状は、交通（鉄道）モデル（LOD1）の定義に従う。
====

===== LOD2

交通（鉄道）モデル（LOD2）では、鉄道の形状を面として表現する。このとき、tran:Railwayは、横断構成要素であるtran:TrafficAreaに分解される。tran:Railwayの空間属性は、これを構成するtran:TrafficAreaの空間属性の集まりとなる。


[requirement]
.LOD2 tran:Railwayの空間属性一致条件
====
[%metadata]
identifier:: /req/rwy/5
subject:: 妥当な交通（鉄道）データセットの要件
description:: LOD2におけるtran:Railwayの空間属性は、これを構成するtran:TrafficAreaの空間属性の集まりと一致しなければならない。
====

交通（鉄道）オブジェクトは、交通（鉄道）モデル（LOD2）の定義に従ったものでなければならない。


[requirement]
.鉄道のLOD2形状定義
====
[%metadata]
identifier:: /req/rwy/6
subject:: 妥当な交通（鉄道）データセットの要件
description:: 鉄道のLOD2の形状は、交通（鉄道）モデル（LOD2）の定義に従う。
====

===== LOD3

交通（鉄道）モデル（LOD3）では、鉄道の形状を面として表現する。このとき、tran:Railwayは、横断構成要素であるtran:TrafficAreaとtran:AuxiliaryTrafficAreaに分解される。tran:Railwayの空間属性は、これを構成するtran:TrafficAreaとtran:AuxiliaryTrafficAreaの空間属性の集まりとなる。


[requirement]
.LOD3 tran:Railwayの空間属性一致条件
====
[%metadata]
identifier:: /req/rwy/7
subject:: 妥当な交通（鉄道）データセットの要件
description:: LOD3におけるtran:Railwayの空間属性は、これを構成するtran:TrafficArea及びtran:AuxiliaryTrafficAreaの空間属性の集まりと一致しなければならない。
====

交通（鉄道）オブジェクトは、交通（鉄道）モデル（LOD3）の定義に従ったものでなければならない。


[requirement]
.鉄道のLOD3形状定義
====
[%metadata]
identifier:: /req/rwy/8
subject:: 妥当な交通（鉄道）データセットの要件
description:: 鉄道のLOD3の形状は、交通（鉄道）モデル（LOD3）の定義に従う。
====

LOD3を、鉄道内の区分と高さの取得方法により、LOD3.0、LOD3.1及びLOD3.2に細分する。 +
<<tab-E-3>>に細分したLOD3の概要を示す。

[[tab-E-3]]
[cols="3a,3a,^a,^a,^a"]
.交通（鉄道）モデル（LOD3）の概要
|===
h| ^h| 取得基準 ^h| LOD3.0 ^h| LOD3.1 ^h| LOD3.2
.6+h| 鉄道内の区分 | 軌道中心線 |  ● |  ● |  ●
| レールに囲まれた範囲 ^|  ● |  ● |  ●
| レール |  |  ● |  ●
| 軌きょう |  |  |  ○
| 道床 ^|  ● |  ● |  ● footnoteblock:[fn_rail_use_case]
| 交通補助領域 |  |  ● |  ● footnoteblock:[fn_rail_use_case]
.4+h| 高さの取得方法 | 軌道中心線上の勾配変化点に標高を与え、高さをもった線として表現する。 |  ● |  ● |  ●
| 道床に軌道中心線の高さを与える。 ^|  ● |  ● |
| 軌道の横断方向に存在する15㎝以上の高さの差を取得する。 |  |  ● |  ●
| 軌道の横断方向に存在する15㎝未満の高さの差を取得する。 |  |  |  ● footnoteblock:[fn_rail_use_case_2]

|===

[%key]
●:: 必須
■:: 条件付必須
〇:: 任意

[[fn_rail_use_case]]
[NOTE]
--
ユースケースの必要に応じて細分できる。
--

[[fn_rail_use_case_2]]
[NOTE]
--
ユースケースの必要に応じて取得基準を設定できる。
--


[[fig-E-1]]
.線路の構造
image::images/231.webp.png[width=""400]

LOD3は「鉄道内の区分」及び「高さの取得方法」の組み合わせが異なるLOD3.0、LOD3.1及びLOD3.2に分かれる。標準製品仕様は、原則としてLOD3.0を採用する。ただし、ユースケースの必要に応じて、LOD3.1又はLOD3.2を採用できる。LOD3.0からLOD3.2に適用する「鉄道内の区分」及び「高さの取得方法」を<<tab-E-4>>及び<<tab-E-5>>に示す。

[[tab-E-4]]
[cols="1a,6a,6a,6a"]
.交通（鉄道）モデル（LOD3）における「鉄道内の区分」
|===
h| ^h| LOD3.0 ^h| LOD3.1 ^h| LOD3.2
h| 取得例
|
image::images/232.webp.png[]
|
image::images/233.webp.png[]
|
image::images/234.webp.png[]

h| 説明
| 軌道中心線、レールに囲まれた範囲及び道床を面として取得する。
| 軌道中心線、レールに囲まれた範囲（レールの内側）、道床に加え、レールを取得する。また、道床外の鉄道用地を交通補助領域として取得する。
| 軌道中心線、レールに囲まれた範囲、道床に加え、レールを取得する。また、道床外の鉄道用地を交通補助領域として取得する。 +
道床及び道床外の鉄道用地を、ユースケースの必要に応じて細分できる。

|===

LOD3.0における鉄道内の区分は、LOD2と同様である。LOD3.1では、LOD3.0に追加し、レール及び軌道外の鉄道用地を区分する。また、LOD3.2ではLOD3.1で取得した各面を、ユースケースの必要に応じて細分できる。

[[tab-E-5]]
[cols="1a,6a,6a,6a"]
.交通（鉄道）モデル（LOD3）における「高さの取得方法」
|===
h| ^h| LOD3.0 ^h| LOD3.1 ^h| LOD3.2
h| 取得例
|
image::images/235.webp.png[width="150"]
|
image::images/236.webp.png[width="150"]
|
image::images/237.webp.png[width="150"]

h| 説明
| 軌道中心線の各点に標高を与える。 +
道床に軌道中心線上の標高を与える。 +
軌道中心線上の標高とは、レール面の標高とする。
|
軌道中心線の各点に標高を与える。 +
レールの横断方向に存在する15㎝以上の高さの差を取得する。

image::images/238.webp.png[]

|
軌道中心線の各点に標高を与える。 +
レールの横断方向に存在する15㎝未満の高さの差を取得する。 +
高さの差を取得する閾値は、ユースケースの必要に応じて定めることができる。

image::images/239.webp.png[]

|===


==== 鉄道の主題属性

鉄道の主題属性には、あらかじめCityGML又はGMLにおいて定義された属性（接頭辞tran、gml）と、i-URにより拡張された属性（接頭辞uro）がある。CityGMLで定義された属性は、鉄道の名称や種類など、基本的な情報となる。i-URにより拡張された属性には、路線に関する情報を格納するための属性（uro:RailwayRouteAttribute）及び軌道中心線の線形情報を格納するための属性（uro:RailwayTrackAttribute）、数値地形図との互換性を保つための情報を格納するための属性（uro:DmAttribute）、さらに、作成したデータの品質に関する情報を格納するための属性（uro:DataQualityAttribute）がある。

===== データ品質属性（uro:DataQualityAttribute）

3D都市モデルでは、データ集合全体としての品質はメタデータに記録する。しかしながら、メタデータでは、個々のデータに対して位置正確度や適用したLOD等の品質を記述することが困難である。 +
そこで、標準製品仕様書では、個々のデータに対してデータ品質に関する情報を記述するための属性として、「データ品質属性」（uro:DataQualityAttribute）を定義している。データ品質属性は、属性としてデータ作成に使用した原典資料の地図情報レベル、その他原典資料の諸元及び精緻化したLODをもつ。 +
3D都市モデルに含まれる全ての交通（鉄道）オブジェクトは、このデータ品質属性を必ず作成しなければならない。ただし、鉄道（tran:Railway）に対してデータ品質属性を付与することはできるが、これを構成する交通領域（tran:TrafficArea）や交通補助領域（tran:AuxiliaryTrafficArea）にデータ品質属性を付与することはできない。

