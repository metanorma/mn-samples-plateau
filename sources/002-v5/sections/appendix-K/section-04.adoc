[[tocK_04]]
=== 標準的な作業手順


==== 幾何オブジェクトの作成

都市計画決定情報モデルの作成に使用する原典資料を示す。

[[tab-K-3]]
[cols="2a,9a,9a"]
.原典資料 一覧
|===
^h| ^h| 水平位置 ^h| 高さ
| LOD1
|

* GISデータ
* 都市計画図書
| ―

|===

===== LOD1

都市計画決定情報モデル（LOD1）作成例を<<fig-K-3>>に示す。

[[fig-K-3]]
.都市計画決定情報モデル（LOD1）の作成イメージ
image::images/298.webp.png[]

幾何オブジェクトの作成方法として、「GISデータの変換により作成する方法」「既成図数値化により作成する方法」「新規に作成する方法」の3つがある。

====== GISデータの変換により作成する方法

GISデータがある場合には、これを利用できる。 +
ただし、既存のGISデータの利用にあたっては以下の点に留意する。

[requirement]
.GISデータに適用される空間参照系
====
[%metadata]
identifier:: /att/urf/3
subject:: 妥当な都市計画決定情報データセットの要件
class:: 留意事項
[statement]
--
都市計画決定された時期やGISデータが作成された時期により、データに適用された空間参照系が異なる場合がある。 +
そのため、GISデータに設定された空間参照系を確認すること。また、空間参照系が設定されていない場合には、背景となる地形図との重畳により位置を確認し、適切な空間参照系を設定の上、標準製品仕様書が指定する空間参照系に変換すること。
--
====

[requirement]
.GISデータの位置正確度の確認
====
[%metadata]
identifier:: /att/urf/4
subject:: 妥当な都市計画決定情報データセットの要件
class:: 留意事項
[statement]
--
都市計画決定情報のGISデータには、計画図（縮尺1／2500以上）から作成されたデータや総括図（縮尺1／25000以上）から作成されたデータがある。また、計画図から作成されたデータであっても、元となる計画図が小縮尺の地形図を拡大した便宜的に縮尺1／2500の縮尺である場合もある。

標準製品仕様書では、地図情報レベル2500の地形図を背景として作成された都市計画決定情報オブジェクトを、地図情報レベル2500という。既存のGISデータを利用する場合も、そのGISデータが地図情報レベル2500の地形図を背景として作成されたデータでなければ、GISデータからの変換により作成した都市計画決定情報オブジェクトも地図情報レベル2500とはならない。ただし、このときの地図情報レベル2500とは、背景となる地形図が作成された時点のものとなる。

地図情報レベル2500以外のGISデータを利用する場合には、原典資料リストにおいて、地図情報レベルを明示すること。
--
====

====== 既成図数値化により幾何オブジェクトを作成する方法

GISデータが存在しない場合には、計画図から区域の形状をデジタイズし、幾何オブジェクトを作成することができる。既成図数値化の作業手順及び精度管理は、「作業規程の準則　第3編第5章　既成図数値化」に従う。

なお、計画図そのものの位置正確度は、「GISデータを変換する方法」と同様に確認する必要がある。計画図が地図情報レベル2500の品質を満たしていない場合には、この計画図から作成した都市計画決定情報も地図情報レベル2500とはならない。

====== 新規に幾何オブジェクトを作成する方法

新規に幾何オブジェクトを作成する方法とは、地図情報レベル2500の数値地形図データ（都市計画基本図データ）を背景として新たに都市計画の区域を作図する方法である。主として、今後新たに都市計画決定や変更をする際に、計画図に掲載する区域の図形と3D都市モデルの都市計画決定オブジェクトを一体的に作成することを想定した手法である。


==== 作業上の留意事項

===== 都市計画の変更に伴う区域の考え方


都市計画の変更に伴い、区域の形状が変化する場合がある。このとき、GISデータでは区域を示す図形が1つであっても、実際には、決定された告示が異なる部分の集まりとなる。3D都市モデルでは、都市計画の区域を、都市計画の効力が生じた告示ごとに区域を分割して作成する（<<fig-K-4>>）。

都市計画の効力が生じた告示の日付は属性urf:validFromに記述し、告示の番号はurf:notificationNumberに記述する。一方、当該都市計画を含む最終（最新）の都市計画の告示日と告示番号は、属性urf:finalNotificationDateとurf:finalNotificationNumberに記述する。

都市計画が変更となったが、当該区域の形状に変化がない場合、各区域のurf:validFrom及びurf:notificationNumberの値は変化しないが、最新の都市計画の告示日と告示番号を示すurf:finalNotificationDateとurf:finalNotificationNumberは、更新される。

[[fig-K-4]]
image::images/299.webp.png[]

.区域の分割イメージ
image::images/300.webp.png[]

都市計画決定情報のデータセットに必須として含むべきデータはデータセットが作成された時点で有効である都市計画である。また、無効となった区域を把握したい場合にはこれを含むことができる。

<<fig-K-4>>の例では、2025年10月1日にある区域が「第2種住居地域」として指定され、2027年10月1日に都市計画の変更により区域が拡大された。また、2030年10月1日に再度都市計画が変更され区域が縮小された。このとき、縮小された区域は2025年に指定された区域の一部であった。続いて2035年10月1日の都市計画の変更では「第2種住居地域」として指定されていた全ての区域は「近隣商業地域」に変更された。このような場合、各年に整備した都市計画決定情報のデータセットには次のようなデータが含まれる。

2025年のデータセットには、この年に決定された「第2種住居地域」のデータ（データ①）が含まれる。urf:validFromの値は2025-10-01となり、urf:validFromTypeの値は1（新規）となる。

2027年のデータセットには、この年に拡大された「第2種住居地域」のデータ（データ②）が追加される。データ②は都市計画の変更により生じた区域であるため、urf:validFromTypeの値は3（変更）となる。また、最新の告示番号が更新されるため、データ①の属性urf:noteは更新され、値は2027-10-01-○○市告示第150号となる。

2030年のデータセットには、2025年に決定された区域が縮小された区域のデータ（データ①-2）と、2027年に決定された区域のデータ（データ②）が含まれる。ともに、最新の告示番号であるurf:noteが更新される（値は2030-10-01-○○市告示第160号）。このとき、都市計画が変更される前まで存在していた区域（データ①）の消失を把握したい場合には、urf:validTo及びurf:validToTypeを使用する。urf:validToの値は2030-10-01となり、urf:validToTypeの値は3（変更）となる。2030年のデータセットとして必須となるデータはデータ①-2及びデータ②であり、データ①はオプションである。

2035年のデータセットには、新たに決定された「近隣商業地域」を示す区域のデータ（データ③）が含まれる。また、消失した区域の把握を行う場合には、第2種住居地域の区域を示すデータ①-2及びデータ②のurf:validTo及びurf:validToTypeを記述したものをデータセットに含める。2035年度のデータセットとして必須となるのはデータ③であり、データ①、データ①-2及びデータ②はオプションである。

また、オプションとなるデータは、各年の必須のデータ（有効な都市計画のデータ）の差分により生成可能である。なお、既に都市計画が決定されてから長い時間が経ち、複数の変更が加えられ、それらの記録が紙でしか残されていない場合も多い。このような場合、過去の都市計画の変遷を管理することは現実的でないため、urf:notificationNumber（告示番号）をNullとするなどとし、本標準製品仕様書に基づいてデータ整備が可能な時点から時系列に整備することも考えられる。

[[tocK_04_02_02]]
===== 原典資料が得られない場合の対応

過去の都市計画決定図書の入手が困難であり、過去の都市計画の変遷が分からない場合の対応例を以下に示す。

[[tocK_04_02_02_01]]
====== 最新（最終）の都市計画のみが明らかな場合

最新（最終）の変更に関する情報は得られるが、過去の都市計画の情報が得られない場合、最新（最終）の都市計画決定情報のみを作成する。このとき、作成するデータの告示日urf:validFromは変更告示の日付となり、その区分urf:validFromTypeは変更を示す3となる。また、この都市計画は現在有効であるため、urf:validTo及びurf:validToTypeは作成しない。都市計画の決定者urf:custodianは、この変更告示を行った行政機関の名称となる。

なお、この場合、告示日（urf:validFrom）と告示番号（urf:notificationNuber）は、最終の告示日（urf:finalNotificationDate）及び告示番号（urf:finalNotificationNumber）と一致する。

[[fig-K-5]]
.最新のみ分かる場合のデータの作成例
image::images/301.webp.png[]

[[tocK_04_02_02_02]]
====== 当初と最新（最終）のみ明らかな場合

当初の都市計画決定と最新（最終）の変更に関する情報は得られるが、その間の変遷に関する情報が得られない場合がある。この場合、最新（最終）の変更に関する情報は、前項<<tocK_04_02_02_01>>と同様に作成する（<<fig-K-6>>作成するデータ①）。

これに加えて、当初の都市計画のデータを作成することができる（作成するデータ②）。このとき、作成するデータ②の告示日urf:validFromは当初の告示の日付となり、その区分urf:validFromTypeは新規を示す1となる。また、この都市計画は現在無効であるため、urf:validToとurf:validToTypeを作成するが、変遷が分からないため、urf:validToは無効を示す0001-01-01となり、urf:validToTypeは変更を示す3となる。都市計画の決定者urf:custodianは、この当初の告示を行った行政機関の名称となる。

[[fig-K-6]]
.変遷が分からない場合のデータの作成例
image::images/302.webp.png[]

