[[tocC_11]]
=== 標準的な作業手順

[[tocC_11_01]]
==== 幾何オブジェクトの作成

建築物モデルの作成に必要となる原典資料を<<tab-C-13>>に示す。

[[tab-C-13]]
[cols="5a,9a,9a,9a,9a,9a"]
.建築物モデルの原典資料一覧（幾何オブジェクト）
|===
h| h| 水平位置 h| 高さ h| 上面の形状 h| 付属物 h| 屋内空間
h| LOD0 | 都市計画基本図等のDMデータ | ― | ― | ― | ―
h| LOD1 | 都市計画基本図等のDMデータ又は航空写真 | 航空レーザ点群又は航空写真から作成した点群 | ― | ― | ―
h| LOD2 | 都市計画基本図等のDMデータ又は航空写真 | 航空レーザ点群又は航空写真から作成した点群 | 航空レーザ点群又は航空写真から作成した点群 | 航空レーザ点群又は航空写真から作成した点群 | ―
h| LOD3
| 以下のいずれかのデータを一つ以上使用する。

* 都市計画基本図等のDMデータ
* 航空写真
* 航空レーザ点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
* 平面図
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
| ―

h| LOD4
| 以下のいずれかのデータを一つ以上使用する。

* 都市計画基本図等のDMデータ
* 航空写真
* 航空レーザ点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
* 平面図
* BIMモデル
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
* BIMモデル
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
* BIMモデル
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
* BIMモデル
| 以下のいずれかのデータを一つ以上使用する。

* 平面図及び断面図
* MMS点群
* LidarSLAM点群
* 地上レーザ点群
* LiderSLAM点群
* BIMモデル

|===

NOTE: 原典資料の一覧に示す平面図、断面図は設計時や竣工時に作成された図面を指す。また、図面は紙出力された資料及びCADデータを含む。

[[tocC_11_01_01]]
===== LOD0

[[tocC_11_01_01_01]]
====== 原典資料

[cols="5a,9a,9a,9a,9a,9a"]
|===
| | 水平位置 | 高さ | 上面の形状 | 付属物 | 屋内空間

h| LOD0 | 都市計画基本図等のDMデータ | ― | ― | ― | ―

|===

[[tocC_11_01_01_02]]
====== 作業手順

. DMデータより建築物に関する図式を抽出する。 +
<<tab-C-14>>に関する公共測量標準図式の分類コードを示す。ただし、都市により独自の分類コードを使用していることがあるため、都市ごとの公共測量作業規程を確認する必要がある。
. 妥当な幾何オブジェクトの要件に適合するよう、必要に応じて図式を修正する。 +
公共測量標準図式では、建築物の外周は、始終点が一致した面として定義されている。ただし、採用する公共測量標準図式の版によっては、建築物の外周が線として作成されている場合もある。 +
そのため、抽出したDMデータの幾何オブジェクトが妥当な幾何オブジェクトの要件に適合しているかを確認し、適合していない場合には修正が必要となる。

// RWP slide 23 use luta_gml_dictionary_table
// EDITOR: Autogen table below requires a check

[[tab-C-14]]
.建築物に該当する公共測量標準図式の分類コード

lutaml_gml_dictionary::iur/codelists/3.2/Building_class.xml[template="gml_dict_template.liquid",context=dict]

[.source]
<<gsi_map_level_dps>>

// RWP table below now autogenerated as shown above

////

[[tab-C-14]]
[cols="1a,2a,2a"]
.建築物に該当する公共測量標準図式の分類コード
|===
h| 分類コード h| 名称 h| 対応するクラス
| 3000 | 分類しない建物 | bldg::Building
| 3001 | 普通建物 | bldg::Building
| 3002 | 堅ろう建物 | bldg::Building
| 3003 | 普通無壁舎 | bldg::Building
| 3004 | 堅ろう無壁舎 | bldg::Building

|===

////

[requirement]
.2次元のGISデータのエラーについて
====
[%metadata]
identifier:: /att/bldg/1
subject:: 妥当な建築物データセットの要件
class:: 留意事項
[statement]
--
建築物モデル（LOD0）で使用するgml:Polygonは、その外周及び内周の自己交差や重なりが許されない。そのため、DMデータの形状に下記図の「誤」に区分されるエラーが含まれる場合は、図形を修正する必要がある。

[[fig-C-39]]
.gml:Polygonの例　（<<tocB>>より再掲）
image::images/176.webp.png[width="500"]
--
====

[requirement]
.より詳細な建築物モデルに基づく建築物モデル（LOD0）の修正について
====
[%metadata]
identifier:: /att/bldg/2
subject:: 妥当な建築物データセットの要件
class:: 留意事項
[statement]
--
より新しい原典資料を用いて建築物モデル（LOD2）を作成する場合、LOD2の外周の正射影と既存のLOD0の形状が一致するよう、LOD0の形状を修正することを基本とする。 +
一方、建築物モデル（LOD3）又は建築物モデル（LOD4）を作成する場合、LOD3又はLOD4の外周の正射影とLOD0の形状を一致させる必要はない。
--
====

[[tocC_11_01_02]]
===== LOD1

[[tocC_11_01_02_01]]
====== 原典資料

[cols="5a,9a,9a,9a,9a,9a"]
|===
| | 水平位置 | 高さ | 上面の形状 | 付属物 | 屋内空間

h| LOD1 | 都市計画基本図等のDMデータ又は航空写真 | 航空レーザ点群又は航空写真から作成した点群 | ― | ― | ―

|===

[[tocC_11_01_02_02]]
====== 作業手順

. 建築物モデル（LOD0）の範囲に含まれる航空写真から作成した点群又は航空レーザ点群を抽出し、中央値を算出する。
. 建築物モデル（LOD0）を構成する各頂点に、高さとして、算出した中央値を与える。
. 前項で作成した高さをもった外周を、地表面の高さまで押し下げ、立体を作成する。地表面が傾斜している場合は、最低となる高さまで押し下げる。

[requirement]
.面の向きについて
====
[%metadata]
identifier:: /att/bldg/3
subject:: 妥当な建築物データセットの要件
class:: 留意事項
[statement]
--
LOD1では、建築物を立体として作成する。立体を構成する各面は、外側が正となる向きになっていなければならない。建築物モデル（LOD0）において、lod0FootPrintを使用した場合、この面は上向きとなる。 +
一方、この面を立体の底として利用する場合は、下向きの面にならなければならない。つまり、建築物モデル（LOD0）で使用するlod0FootPrintの面と、建築物モデル（LOD1）の底面として使用する面は、表裏の関係となる。面の向きを変えるには、座標列を反転させればよい。
--
====

[requirement]
.より詳細な建築物モデルに基づく建築物モデル（LOD1）の修正について
====
[%metadata]
identifier:: /att/bldg/4
subject:: 妥当な建築物データセットの要件
class:: 留意事項
[statement]
--
建築物モデル（LOD2）を作成した際に、建築物モデル（LOD1）の形状と著しく乖離することが明らかとなった場合は、建築物モデル（LOD1）を、建築物モデル（LOD2）に基づいて修正することを基本とする。 +
LOD1では、LOD0により記述される建築物の外形データを一律の高さで上向きに押し出すことにより建築物を立体として作成する。そのため、建築物の外形データの取得方法によっては、一律の高さを与えることで実際の建築物の形状と著しく乖離する場合がある。下記図は建築物の正面玄関に存在する階段の両端にあたる部分が外周の一部として取得されていたため、LOD1による一律の押し出しにより、実際の形状と乖離した例である。 +
このような場合は、建築物モデル（LOD2）に基づき、建築物モデル（LOD1）を修正することを基本とする。ただし、修正は、建築物モデル（LOD1）がbldg:lod0RoofEdgeから作成されている場合に限る。 +
なお、建築物モデル（LOD3）及び建築物モデル（LOD4）は作成の手法上、建築物の外形に異なる地図情報レベルが含まれる場合があるため、建築物モデル（LOD1）を修正する必要はない。

[[fig-C-40]]
.実際の建築物の形状と乖離するLOD1建築物（中央）の例
image::images/177.webp.png[width="500"]
--
====

[requirement]
.LOD1の押し出し高さについて
====
[%metadata]
identifier:: /att/bldg/5
subject:: 妥当な建築物データセットの要件
class:: 留意事項
[statement]
--
LOD1の押し出し高さは一律の高さである。一律の高さは、建築物モデル（LOD0）の範囲に含まれる航空写真から作成した点群又は航空レーザ点群の中央値を原則としている。 +
取得した押し出し高さ（中央値）が妥当であるかどうかの判断方法の一例を下記に示す。 +
建築物モデル（LOD1）に対して塔状比（LOD1の押し出し高さ/√LOD0の面積）（下記図）を算出し閾値を超えたものは、該当の建築物モデルを航空写真又は航空レーザ点群で屋根の高さを取得できるか目視で確認する。


[[fig-C-41]]
.塔状比の計算例
image::images/178.webp.png[width="300"]

閾値は整備する自治体の特性（都市部が多い、山間部が多い等）に応じ変更する。例えば、2023年度に整備した東京都の建築物モデルでは、閾値として「2」を採用した。 +
上記の判断方法にて押し出し高さが妥当でないと判断された場合は、以下の手法のいずれかにより押し出し高さを設定する。なお、採用する手法については、発注者と協議が必要である。(((建築物の高さ)))

* 都市計画基礎調査の建物利用現況に含まれる「高さ」を押し出し高さとする。
* 建築確認申請書類等に記載される「建築物の高さ」を押し出し高さとする。
* 「階高（3mや4m）」に都市計画基礎調査等に含まれる「建物階数」を乗算した値を押し出し高さとする。
* 一律3mを押し出し高さとする。

下記図に実際に正しい高さが取得できない建築物の事例を示す。

[[fig-C-42]]
.樹木下の建築物の例
image::images/179.webp.png[]

中央値以外の値を採用する場合は、uro:lod1HeightTypeの値をコードリスト（DataQualityAttribute_lod1HeightType.xml）から採用した方法に従って選択し、入力する。
--
====

[[tocC_11_01_03]]
===== LOD2

[[tocC_11_01_03_01]]
====== 原典資料

[cols="5a,9a,9a,9a,9a,9a"]
|===
| | 水平位置 | 高さ | 上面の形状 | 付属物 | 屋内空間

h| LOD2 | 都市計画基本図等のDMデータ又は航空写真 | 航空レーザ点群又は航空写真から作成した点群 | 航空レーザ点群又は航空写真から作成した点群 | 航空レーザ点群又は航空写真から作成した点群 | ―

|===

[[tocC_11_01_03_02]]
====== 作業手順

. 建築物の外観を構成する各面を取得する。 +
建築物モデル（LOD0）の範囲に含まれる航空写真から作成した点群又は航空レーザ点群を抽出し、建築物の屋根形状を作成する。このとき、屋根の棟及び谷で区切り、屋根の傾斜や向きを再現する。
. 前項で作成した各面を境界とする立体を作成する。 +
建築物モデル（LOD2）の作成については、以下の技術レポートを参考にできる。 +
参考「<<plateau_tr_56,AI等を活用したLOD2自動生成ツールの開発及びOSS化技術検証レポート>>」

[[tocC_11_01_04]]
===== LOD3

[[tocC_11_01_04_01]]
====== 原典資料

[cols="5a,9a,9a,9a,9a,9a"]
|===
| | 水平位置 | 高さ | 上面の形状 | 付属物 | 屋内空間

h| LOD3
| 以下のいずれかのデータを一つ以上使用する。

* 都市計画基本図等のDMデータ
* 航空写真
* 航空レーザ点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
* 平面図
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
| ―

|===

[[tocC_11_01_04_02]]
====== 作業手順

. 建築物の側面を構成する各面を取得する。 +
建築物モデル（LOD2）の範囲に含まれるMMS点群又は地上レーザ点群を抽出し、建築物の側面を作成する。
. 前項で作成した各面を、外壁面などの境界面や開口部（扉や窓）に区分する。
. 前項で区分した面を用いて建築物の立体を作成する。 +
建築物モデル（LOD3）の作成については、以下の技術レポートを参考にできる。 +
参考「<<plateau_tr_03,3D都市モデルLOD3データ作成実証レポート>>」


[[tocC_11_01_05]]
===== LOD4

[[tocC_11_01_05_01]]
====== 原典資料

[cols="5a,9a,9a,9a,9a,9a"]
|===
| | 水平位置 | 高さ | 上面の形状 | 付属物 | 屋内空間

h| LOD4
| 以下のいずれかのデータを一つ以上使用する。

* 都市計画基本図等のDMデータ
* 航空写真
* 航空レーザ点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
* 平面図
* BIMモデル
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
* BIMモデル
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
* BIMモデル
| 以下のいずれかのデータを一つ以上使用する。

* 航空レーザ点群
* 航空写真から作成した点群
* MMS点群
* 地上レーザ点群
* LiderSLAM点群
* BIMモデル
| 以下のいずれかのデータを一つ以上使用する。

* 平面図及び断面図
* MMS点群
* LidarSLAM点群
* 地上レーザ点群
* LiderSLAM点群
* BIMモデル

|===

[[tocC_11_01_05_02]]
====== 作業手順（BIMモデルからの変換により作成する場合）

BIMモデルからの建築物モデル（LOD4）の作成については、以下のマニュアルに従う。 +
参考「<<plateau_003,3D都市モデル整備のためのBIM活用マニュアル>>」


[[tocC_11_01_05_03]]
====== 作業手順（測量により作成する場合）

建築物モデル（LOD4）において、屋外の形状を作成する手順は、建築物モデル（LOD3）と同様となる。以下の作業手順により屋内の形状を取得する。

. 平面図、断面図等の図面又は点群を使用し、建築物の内部を部屋に区分する。
. 各部屋の境界面を、天井面（bldg:CeilingSurface）、床面（bldg:FloorSurface）、内壁面（bldg:InteriorWallSurface）又は閉鎖面（bldg:ClosureSurface）に区分する。
. （LOD4.1又はLOD4.2の場合）図面又は点群データを参考に、階段、スロープ、輸送設備（エスカレータ、エレベータ及び動く歩道）、柱及びデッキ・ステージを作成する。
. （LOD4.2の場合）平面図、断面図等または点群データを参考に手すり、パネル（部屋の間仕切りのパネル）及び梁を取得する。また、椅子や机などの家具を作成する。

[requirement]
.建築物モデル（LOD4）における部屋の区分について
====
[%metadata]
identifier:: /att/bldg/6
subject:: 妥当な建築物データセットの要件
class:: 留意事項
[statement]
--
建築物モデル（LOD4）では、建築確認申請における部屋を部屋（bldg:Room）として取得する。このときの部屋には、例えば防火区画のように、壁等により物理的に区切られていない、仮想的に区切られた空間を含む。このような空間を区切る場合には、閉鎖面（bldg:ClosureSurface）を使用する。
--
====

[requirement]
.建築物モデル（LOD4）における付属物の取得について
====
[%metadata]
identifier:: /att/bldg/7
subject:: 妥当な建築物データセットの要件
class:: 留意事項
[statement]
--
建築物モデル（LOD4）では、取得対象とする地物型に応じて、LOD4.0、LOD4.1及びLOD4.2の三段階にLODを細分している。LOD3では、対象とする地物の大きさにより各LODにおける付属物等の取得基準を定めているが、LOD4では対象とする地物の大きさではなく種類で取得基準を指定していることに注意する。
--
====

[[tocC_11_02]]
==== 作業上の留意事項

[[tocC_11_02_01]]
===== 道路と建築物の間の表現

建築物には、建築物の出入り口につながる導入路であるアプローチや、建築物の周辺をコンクリートや砂利で施工された空間（「犬走り」と呼ぶ）が設けられている場合がある（<<fig-C-43>>）。

アプローチや犬走りは、道路ではなく、建築物の敷地の一部であるため、tran:Track（徒歩道）を使用して取得する。

[[fig-C-43]]
.犬走り
image::images/180.webp.png[width="300"]

[[tocC_11_02_02]]
===== バルコニーとベランダの区分

バルコニーとベランダは、いずれも建築物の屋外に床を設けた部分であり、一般的には屋根がない場合にバルコニー、軒や庇などによる屋根がある場合にはベランダと呼ばれる。

建築基準法ではバルコニーとベランダを区別せず、バルコニーとして扱っていることから、標準製品仕様書においてもこれらを区分していない。ユースケースにより両者の区分が必要な場合は、拡張製品仕様書においてベランダを追加することができる。

[[tocC_11_02_03]]
===== 普通無壁舎の表現

<<gsi_ops,作業規定の準則　付録7　公共測量標準図式>>では、普通無壁舎の適用に「1.普通無壁舎とは、側壁のない建物、温室及び工場内の建物類似の構築物で、3階未満のものをいう。2.普通無壁舎は、原則として長辺が図上3.0mm以上のものを表示する。ただし、地域の景況を表すために必要と認められるものは、基準に満たないものであっても表示することができる。3.長辺が図上3.0mm未満のものが多数並んでいる場合は、適宜総描又は修飾して表示する。4.温室は、強固な鋼材等を使用した永続性のある堅固な構造のものを表示する。」と記載がある。

普通無壁舎の図式の適用において、「建物類似の構築物」が含まれており、閾値に満たない施設も必要に応じて取得してよいことから、自治体により取得要否の判断が異なる可能性がある。その為、普通無壁舎は以下の基準により、建築物モデルと都市設備モデルで整備するものを区分する。

都市計画基本図において、プラットホーム上屋、プラットホーム、跨線橋が「普通無壁舎」等の建築物として取得されている場合は、建築物モデルとして作成する。都市計画基本図で建築物として取得されていない場合、プラットホーム上屋、プラットホームは「都市設備」として取得し、跨線橋は「橋梁」として取得する。アーケードは都市計画基本図の取得の状況によらず、「都市設備」として取得する。

[[tocC_11_02_04]]
===== 全面が窓や扉となる壁面の表現

壁面の全体が窓や扉により構成されている場合、壁面は空間属性（lod3MultiSurface、lod4MultiSurface）をもたなくてもよい。この場合、壁面は子要素として窓又は扉若しくは窓及び扉の両方を子要素としてもち、壁面に相当する範囲は、その子要素である窓又は扉の空間属性により埋められている状態とならなければならない。

[[fig-C-44]]
.全面が窓や扉となる壁面の例
image::images/181.webp.png[width="600"]

なお、カーテンウォールは、外壁面として取得する。

[[tocC_11_02_05]]
===== 建築物の一部が計測できない場合の対応

MMS点群、地上レーザ点群等の地上からの計測データでは、道路又は屋内通路等に面していない箇所の作成は困難である。次の方法を併用してその形を補完するものとする。

建築物の屋根面が作成できない場合

* LOD2の形状で屋根面を補完する。
* LOD2を整備していない場合は、航空レーザ点群又は航空写真を使い屋根面を取得する。

建築物の外壁面が作成できない場合

* LOD2の形状で外壁面を補完する。
* LOD2を整備していない場合はLOD1の正射影の外周形状を参考に外壁面を補完する。

[[tocC_11_02_06]]
===== 都市計画基礎調査（建物利用現況）の付与

建築物モデルに、都市計画基礎調査等の原典資料から主題属性を付与する方法として、GISソフトウェアを用いた空間結合（建築物モデル（LOD0）の図形と原典資料の図形の重なりを利用して、主題属性を付与する方法）を採用することが標準的である。

しかしながら、建築物モデルの原典資料となる都市計画基本図（数値地形図）と都市計画基礎調査（建物利用現況）は、作成時点、取得基準及び作成方法が異なる場合があり、両者の外形は必ずしも一致しない。また、自治体によって建物利用現況の作成方法が異なるため、同一の作業手順を全自治体に適用することは難しい。

[[fig-C-45]]
.建築物モデルと建物利用現況の外形の違い
image::images/182.webp.png[width="600"]

そこで、空間結合により建築物モデルに建物利用現況の属性を付与する方法として二つの事例を示す。 +
事例1は建築物モデル（LOD0）と建物利用現況のGISデータ（面）の交差面積がそれぞれの図形の面積に占める割合で対応付ける手法、事例2は建築物モデル（LOD0）と建物利用のGISデータ（面）がどれだけ似た図形であるかを指標化しそれらの指標を基に対応付ける手法である。事例1は交差面積と元図形の面積のみで建築物モデルと建物利用現況を対応付けるため、建築物モデルと建物利用現況の形状の差異に強い手法である。一方で、形状が異なる建築物モデルと建物利用現況であっても対応付く恐れもある。そういった問題が懸念される場合は、事例2のような形状の類似性を評価し、それを基に建築物モデルと建物利用現況を対応付ける手法を使用するとよい。ただし、前述の通り、原典資料の状態及び品質（位置の品質、整備時点の差異等）は、自治体ごとに異なるため、作業方法については発注者と協議することが望ましい。

事例1　交差面積を利用して建築物モデルと建物利用現況を対応付ける。

. 建物利用現況と建築物モデル（LOD0）（都市計画基本図）で、GISソフトウェアを使用し空間交差（インターセクト）を実行する。
. 空間交差の結果を基に、一つの建築物モデルの面積に対し重なる建物利用現況の図形面積の合計の比率を計算し、閾値未満の建築物モデルは属性付与対象から削除する。（<<fig-C-46>>）
+
--
NOTE: この際に使用する閾値は原典資料の特性により、適切な閾値を設定する。例えば、2023年度整備の東京都の建築物モデルの場合は、60%を閾値としている。

[[fig-C-46]]
.b．処理結果のイメージ
image::images/183.webp.png[width="500"]
--

. 空間交差の結果を基に、一つ建物利用現況に対し重なる建築物モデルの面積の合計の比を計算し、閾値未満の建物利用現況は属性付与対象から削除する。（<<fig-C-47>>）
+
--
[[fig-C-47]]
.c．処理結果のイメージ
image::images/184.webp.png[width="500"]
--

. b）及びc）で削除したあと残った建築物モデル、建物利用現況で再度空間交差を実行する。

. 空間交差の結果を基に、一つの建築物モデルの面積に対し重なる建物利用現況の図形面積の合計の比を計算し、閾値未満の建築物モデルは属性付与対象から削除する。（<<fig-C-48>>）
+
--
[[fig-C-48]]
.e．処理結果のイメージ
image::images/185.webp.png[width="500"]
--

. 空間交差の結果を基に、一つ建物利用現況に対し重なる建築物モデルの面積の合計の比率を計算し、閾値未満の建物利用現況は属性付与対象から削除する。（<<fig-C-49>>）
+
--
[[fig-C-49]]
.f．処理結果のイメージ
image::images/186.webp.png[width="500"]
--

. 空間交差の結果、一対一で対応付いた場合は、その建物利用現況の主題属性を建築物モデルに付与する。処理の結果、<<fig-C-50>>のようにAとA’、BとB’が一対一で対応付く。
+
--
[[fig-C-50]]
.g．処理結果のイメージ
image::images/187.webp.png[width="500"]
--

. 建築物モデル一つに対し複数の建物現況調査が対応付いた場合は、重なる面積が最大の建物利用現況を採用し、その属性を建築物モデルに付与する。処理の結果、<<fig-C-51>>のように新たにCとC‘が一対一で対応付く。
+
--
[[fig-C-51]]
.h．処理結果のイメージ
image::images/188.webp.png[width="500"]
--

. 建物利用現況一つに対して複数の建築物が対応付いた場合は、同じ建物利用現況の主題属性をそれぞれの建築物モデルに付与する。処理の結果、<<fig-C-52>>のように新たにDとD‘が二対一で対応付く。
+
--
[[fig-C-52]]
.i．処理結果のイメージ
image::images/189.webp.png[width="500"]
--

事例2　周長等を利用して建築物モデルと建物利用現況を対応づける

事例1は交差面積のみで建築物モデルと建物利用現況の対応付けを行っている。事例2では、建築物モデル（LOD0）及び建物利用現況の各図形の面積、周長、狭長（図形の面積を図形の周長で除した値）を算出し、それらを使って似た形状同士を対応付ける手法である。そのため、建築物モデルと建物利用現況の形状が近しいことが前提となることに留意する。
// 事例2　周長等を利用して建築物モデルと建物利用現況を対応づける

. 建築物モデル及び建物利用現況の各図形の面積、周長、狭長を算出する。
. 建物利用現況と建築物モデルで、GISソフトウェアを使用し空間交差（インターセクト）を実行する。
. 空間交差の結果、対応付いた建築物モデルと建物利用現況の全ての組み合わせに対し面積、周長、狭長から面積差率（ABS（（建築物モデルの面積-建物利用現況の図形面積）/建築物モデルの面積）×100）、周長差率（ABS（（建築物モデルの周長-建物利用現況の周長）/建築物モデルの周長）×100）、狭長差率（ABS（（建築物モデルの狭長-建物利用現況の狭長）/建築物モデルの狭長）×100）を求める。
+
--
NOTE: ABS（X）はXの絶対値とする。
--

. 面積差率、周長差率、狭長差率が各閾値を超える建築物モデルと建物利用現況の組み合わせを属性付与対象の対象外とする。
+
--
NOTE: この際に使用する閾値は原典資料の特性により、適切な閾値を設定する。例えば、面積差率、周長差率、狭長差率の平均及び標準偏差を算出し、その平均及び標準偏差から各差率の閾値を設定することができる。ただし、この閾値の設定の考え方は建築物モデルと建物利用現況の大多数が近しい形状をもつことが前提である。
--

. d）を実施し残った建築物モデルと建物利用現況の組み合わせが一対一で対応付いた場合は、その建物利用現況の主題属性を建築物モデルに付与する。
. 一つの建築物モデルに対し、複数の建物利用現況が対応付いた場合は、その中で面積差率、周長差率、狭長差率を加算し、3で除したものの最も低い建物利用現況を採用し、その主題属性を建築物モデルに付与する。
. 一つの建物利用現況に対し、複数の建築物モデルが対応付いた場合は同じ建物利用現況の主題属性をそれぞれの建築物モデルに付与する。

