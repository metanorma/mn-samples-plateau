[[tocC_08]]
=== bldg:BuildingInstallation

bldg:BuildingInstallationは、バルコニー、煙突又は屋外階段のような、建築物の外側に設置された付属的な設備であり、かつ永続的に設置されている設備である。


[[tocC_08_01]]
==== 建築物付属物の空間属性

bldg:BuildingInstallationの空間属性の型は、gml:_Geometryである。gml:_Geometryは、幾何オブジェクトの基底要素であり、実装においては、この下位型のうち、具象となる幾何オブジェクトを、地物の形状に合わせて選定する。


[requirement]
.bldg:BuildingInstallationの空間属性タイプ
====
[%metadata]
identifier:: /req/bldg/25
subject:: 妥当な建築物データセットの要件
description:: bldg:BuildingInstallationの空間属性の型には、gml:MultiSurfaceを使用することを原則とする。
====

ある程度の広がりをもつ地物は、曲面の集まり又は立体を使用する。CityGMLでは、曲面や立体だけではなく、点や曲線も使用可能である。しかしながら3D都市モデルでは、3次元での利用を想定し、付属物の形状に使用可能な幾何オブジェクトを曲面又は立体に限定する。原則として面の集まり（gml:MultiSurface）を使用するが、ユースケースの必要に応じてgml:Solidを使用できる。


[requirement]
.bldg:BuildingInstallationの接触条件
====
[%metadata]
identifier:: /req/bldg/26
subject:: 妥当な建築物データセットの要件
description:: bldg:BuildingInstallationの空間属性は、bldg:Building又はbldg:BuildingPartと接していなければならない。
====

また、建築物付属物をbldg:BuildingInstallationを用いて記述する場合には、一棟のbldg:Building又はbldg:Buildingの一部でなければならず、孤立して存在することは許されない。 +
bldg:BuildingInstallationも、その境界面をbldg:_BoundarySurfaceを用いて記述することができる。bldg:_BoundarySurfaceを用いて建築物付属物の外壁面等を記述する場合は、bldg:BuildingInstallationの空間属性は、この境界面となるbldg:_BoundarySurfaceの空間属性を外部参照しなければならない。


[requirement]
.bldg:BuildingInstallationの境界面参照条件
====
[%metadata]
identifier:: /req/bldg/27
subject:: 妥当な建築物データセットの要件
description:: bldg:BuildingInstallationの境界面をbldg:_BoundarySurfaceを用いて記述する場合、bldg:BuildingInstallation の空間属性bldg:lod2Geomerty又はbldg:lod3Geomertyは、bldg:_BoundarySurfaceの空間属性を外部参照しなければならない。
====

<<fig-C-37>>に建築物付属物と境界面の例を示す。<<fig-C-37>>は建築物の外部に設置された階段であり、その大きさから立体として取得する。このとき、立体を構成する各境界面を、bldg:_BoundarySurfaceの下位型となる地物型にて取得する場合は、階段部分及び踊り場はbldg:OuterFloorSurface、側面はbldg:WallSurface、下面はbldg:GroundSurfaceとして取得する。また、建築物本体との境界面は仮想的にbldg:ClosureSurfaceとして取得する。この仮想的な面は、立体の外側境界を閉じるために必要である。

[[fig-C-37]]
.建築物付属物と境界面の実装例
image::images/174.webp.png[]

ユースケースに不要な場合には、bldg:BuildingInstallationの境界面はbldg:_BoundarySurfaceを用いて記述しなくてもよい。ただし、bldg:BuildingInstallationの境界面が、bldg:Buildingの境界面を兼ねる場合には、必ずbldg:BuildingInstallationの境界面をbldg:_BoundarySurfaceを用いて記述しなければならない。


[requirement]
.bldg:BuildingInstallationの境界面記述条件
====
[%metadata]
identifier:: /req/bldg/28
subject:: 妥当な建築物データセットの要件
description:: bldg:BuildingInstallationの境界面が、bldg:Buildingの境界面を兼ねる場合、bldg:BuildingInstallationの境界面は、bldg:_BoundarySurfaceの下位型を用いて記述する。
====

このとき、bldg:Buildingの境界面とbldg:BuildingInstallationの境界面とは、表裏の関係になる。


[[tocC_08_02]]
==== 建築物付属物の主題属性

bldg:BuildingInstallationは、建築物に付属する恒久的に設置された設備の総称となる。そのため、それが何であるか（例：階段、バルコニー）は、主題属性により区分する。


[requirement]
.bldg:BuildingInstallationの設備区分方法
====
[%metadata]
identifier:: /req/bldg/29
subject:: 妥当な建築物データセットの要件
description:: bldg:BuildingInstallationは、bldg:functionによりその設備を区分する。
====

bldg:functionが取りうる値は、コードリストにより定義されている。 +
標準製品仕様書では、<<tab-C-11>>に示す区分が用意されている。例えば、階段の場合には「1060」となる。この区分に該当しない付属物が存在する場合には、本付属書で示すコードリストの拡張手順に従い、コードを追加する。

// RWP slide 21 use luta_gml_dictionary_table
// EDITOR: Autogen table below requires a check

[[tab-C-11]]
.BuildingInstallationの区分

lutaml_gml_dictionary::iur/codelists/3.2/BuildingInstallation_function.xml[template="gml_dict_template.liquid",context=dict]

[.source]
<<citygml_20,annex="C.1">>

[.source]
<<iso_6707-1>>

// RWP table below now autogenerated as shown above

////
[[tab-C-11]]
[cols="3a,17a"]
.BuildingInstallationの区分
|===
h| ファイル名 | BuildingInstallation_function.xml
h| コード h| 説明
| 1000 | バルコニー
| 1001 | ポーチ
| 1002 | テラス
| 1003 | エントランスホール
| 1010 | 温室
| 1011 | カーポート
| 1012 | 物置
| 1020 | アーケード
| 1021 | 回廊
| 1030 | 煙突（建築物の一部としての）
| 1031 | ダクト
| 1032 | 換気口
| 1033 | アンテナ
| 1040 | 塔（建築物の一部としての）
| 1041 | 塔屋
| 1050 | 柱・円柱
| 1051 | 看板
| 1052 | 屋根飾り
| 1053 | ドーマー
| 1054 | 出窓
| 1060 | 階段
| 1061 | 手すり
| 1062 | 外階段・歩道の庇
| 1070 | その他

|===
////

なお、bldg:BuildingInstallationは、建築物の外側に設置された、建築物の付属的な設備を指す。 +
そのため、<<tab-C-11>>に該当する設備であっても、建築物に付属していない設備は、bldg:BuildingInstallationとしては取得しない。 +
例えば、商店街に設置された、独立して存在する規模の大きなアーケード（<<fig-C-38>>）は、 +
bldg:BuildingInstallationではなく、frn:CityFurnitureとして取得する。

[[fig-C-38]]
.frn:CityFurnitureで取得すべきアーケード
image::images/175.webp.png[]

