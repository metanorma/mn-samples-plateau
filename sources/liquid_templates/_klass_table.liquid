{% assign root = klass.generalization %}

{%- capture upper_klass_name -%}
{{ root.general.upper_klass }}:{{ root.general.name }}
{%- endcapture -%}
{%- if upper_klass_name == ":" -%}
  {%- assign upper_klass_name = "&#x2014;" -%}
{%- endif -%}
{%- capture stereotype -%}<< {{ root.stereotype }} >>{%- endcapture -%}
{%- if stereotype == "<<  >>" -%}
  {%- assign stereotype = " " -%}
{%- endif -%}

[cols="1a,1a,2a,1a"]
|===
| AGT 型の定義 3+| {{ root.definition }}
h| 上位の型 3+| {{ upper_klass_name }}
h| ステレオタイプ 3+| {{ stereotype }}

{% if root.inherited_props.size > 0 %}
4+h| 継承する属性
h| 属性名 h| 属性の型及び多重度 h| 定義 h| 補足
{% endif %}
{% for attr in root.inherited_props %}
  {%- if attr.has_association? == false -%}
    {%- capture name_col -%}
      {%- if attr.used? == false -%}
        ({{ attr.name_ns }}:{{ attr.name }})
        [ {{ attr.gen_name }} ]
      {%- else -%}
        {{ attr.name_ns }}:{{ attr.name }}
        [ {{ attr.gen_name }} ]
      {%- endif -%}
    {%- endcapture -%}
    | {{ name_col | newline_to_br }}
    | {{ attr.type }} [{{ attr.cardinality.min }}..{{ attr.cardinality.max }}]
    | {{ attr.definition }}
    | {{ attr.guidance }}
  {%- endif -%}
{% endfor %}

{% if root.owned_props.size > 0 %}
4+h| 自身に定義された属性
h| 属性名 h| 属性の型及び多重度 h| 定義 h| 補足
{% endif %}
{% for attr in root.owned_props %}
  {%- if attr.has_association? == false -%}
    {%- capture name_col -%}
      {%- if attr.used? == false -%}
        ({{ attr.name_ns }}:{{ attr.name }})
        [ {{ attr.gen_name }} ]
      {%- else -%}
        {{ attr.name_ns }}:{{ attr.name }}
        [ {{ attr.gen_name }} ]
      {%- endif -%}
    {%- endcapture -%}
    | {{ name_col | newline_to_br }}
    | {{ attr.type }} [{{ attr.cardinality.min }}..{{ attr.cardinality.max }}]
    | {{ attr.definition }}
    | {{ attr.guidance }}
  {%- endif -%}
{% endfor %}

{% if root.inherited_assoc_props.size > 0 %}
4+h| 継承する関連役割
h| 関連役割名 h| 関連役割の型及び多重度 h| 定義 h| 補足
{% endif %}
{% for attr in root.inherited_assoc_props %}
  {%- if attr.has_association? == true -%}
    {%- capture name_col -%}
      {%- if attr.used? == false -%}
        ({{ attr.name_ns }}:{{ attr.name }})
        [ {{ attr.gen_name }} ]
      {%- else -%}
        {{ attr.name_ns }}:{{ attr.name }}
        [ {{ attr.gen_name }} ]
      {%- endif -%}
    {%- endcapture -%}
    | {{ name_col | newline_to_br }}
    | {{ attr.type_ns }}:{{ attr.type }} [{{ attr.cardinality.min }}..{{ attr.cardinality.max }}]
    | {{ attr.definition }}
    | {{ attr.guidance }}
  {%- endif -%}
{% endfor %}

{% if root.assoc_props.size > 0 %}
4+h| 自身に定義された関連役割
h| 関連役割名 h| 関連役割の型及び多重度 h| 定義 h| 補足
{% endif %}
{% for attr in root.assoc_props %}
  {%- if attr.has_association? == true -%}
    {%- capture name_col -%}
      {%- if attr.used? == false -%}
        ({{ attr.name_ns }}:{{ attr.name }})
        [ {{ attr.gen_name }} ]
      {%- else -%}
        {{ attr.name_ns }}:{{ attr.name }}
        [ {{ attr.gen_name }} ]
      {%- endif -%}
    {%- endcapture -%}
    | {{ name_col | newline_to_br }}
    | {{ attr.type_ns }}:{{ attr.type }} [{{ attr.cardinality.min }}..{{ attr.cardinality.max }}]
    | {{ attr.definition }}
    | {{ attr.guidance }}
  {%- endif -%}
{% endfor %}
|===