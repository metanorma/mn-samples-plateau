= Project PLATEAU sample documents

These documents belong to Project PLATEAU by MLIT.

== Structure

`sources/`::
source of the documents

`_site/`::
(automatically generated, in the `gh-pages` branch) published document.


== Usage

=== Installing Metanorma

See https://www.metanorma.org

=== Fetching the document

[source,sh]
----
git clone https://github.com/metanorma/mn-samples-plateau/
----

=== Building the document

[source,sh]
----
metanorma site generate
----


== Editor usage

=== Convert images from webp to PNG

Some PLATEAU documents utilize webp images.

Due to https://github.com/metanorma/mn-samples-plateau/issues/7 , the PDF renderer we use, Apache FOP, does not support webp images.

Hence at import we have to convert all webp images into PNG.

Converting with parallel processing: (if you have GNU Parallel)

[source,sh]
----
$ parallel dwebp {} -o {}.png ::: *.webp
----

Converting sequentially:

[source,sh]
----
$ find . -name "*.webp" -exec dwebp \{} -o \{}.png
----

Updating the files to refer to the new `.png` files:

[source,sh]
----
sed -i '' 's/\.webp/.webp.png/g' sources/001-v3/sections/*.adoc
----


=== Running via Docker or locally

If you have installed the build tools locally, and wish to run the
locally-installed compilation tools, there is nothing further to set.

If you don't want to deal with local dependencies, use the docker:

[source,sh]
----
docker run -v "$(pwd)":/metanorma -w /metanorma -it metanorma/metanorma metanorma site generate
----
